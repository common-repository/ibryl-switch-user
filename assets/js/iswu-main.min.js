function PluginSwitchUser(){const t=document,e=t.createElement("div"),s=t.createElement("button");PluginSwitchUser.prototype.init=(()=>{this.widget.pasteElement(),this.widget.createArrow(),this.getUsersAjax(),this.scrollAnimate()}),PluginSwitchUser.prototype.getUsersAjax=(()=>{let t={action:"switch_user_get_users",slug:iswu.pluginSlug};fetch(iswu.ajaxUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(t).toString()}).then(t=>t.json()).then(t=>{PluginSwitchUser.prototype.renderUsersList(t.data),e.classList.remove("hidden")})}),PluginSwitchUser.prototype.widget={pasteElement:()=>{e.id=iswu.pluginSlug,e.classList.add("close"),e.classList.add("hidden"),t.body.insertAdjacentElement("afterbegin",e)},createArrow:()=>{s.type="button",s.textContent="❰",s.classList.add("arrow"),s.classList.add("left"),e.appendChild(s),s.addEventListener("click",function(){this.classList.contains("left")?PluginSwitchUser.prototype.widget.open():this.classList.contains("right")&&PluginSwitchUser.prototype.widget.close()})},open:()=>{s.classList.remove("left"),s.classList.add("right"),s.textContent="❱",e.classList.contains("close")&&(e.classList.remove("close"),e.classList.add("open"))},close:()=>{s.classList.remove("right"),s.classList.add("left"),s.textContent="❰",e.classList.contains("open")&&(e.classList.remove("open"),e.classList.add("close"))}},PluginSwitchUser.prototype.setUserByIdAjax=(t=>{let e={action:"switch_user_set_user",id:t};fetch(iswu.ajaxUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(e).toString()}).then(t=>t.json()).then(t=>{!0===t.success&&window.location.reload()})}),PluginSwitchUser.prototype.renderUsersList=(e=>{let s=t.createElement("ul");s.classList.add("list");for(let o in e){var i=t.createElement("li");i.classList.add("item");var n=t.createElement("button");n.onclick=(()=>{PluginSwitchUser.prototype.setUserByIdAjax(e[o].id)}),n.type="button",n.title=e[o].role,n.innerText=e[o].name,i.appendChild(n),s.appendChild(i)}t.getElementById(iswu.pluginSlug).appendChild(s)}),PluginSwitchUser.prototype.scrollAnimate=(()=>{["scroll","keyup"].forEach(t=>{window.addEventListener(t,t=>{t.target!==e&&e.classList.contains("open")&&setTimeout(()=>{PluginSwitchUser.prototype.widget.close()},500)})})})}const object=new PluginSwitchUser;object.init();
//# sourceMappingURL=iswu-main.min.js.map
